
@{
    List<md_Planilha.mdValores> usuario = ViewBag.Usuarios;
    ViewBag.Title = "Cadastrar";
    Layout = "~/Views/Shared/_LayoutAdm.cshtml";
}

<body id="cadastrar">
    @if (TempData["sucesso"] != null)
    {
        <div class="alert alert-success">@TempData["sucesso"]</div>
    }
    @if (TempData["erro"] != null)
    {
        <div class="alert alert-danger">@TempData["erro"]</div>
    }

    <div class="body-background-cadastrar"></div>
    <h2><b>Cadastro de Empresas</b></h2>
    <h2>@ViewBag.Nome</h2>

    <div class="container col-xs-push-8">
        <div class="table-responsive">
            <div class="row-no-gutters">
                <button class="btn btn-success fa fa-user-plus pull-right fa-2x" data-toggle="modal" data-target=".cadastrar" style="margin-bottom:10px;"><span style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif">&nbsp;Cadastrar</span></button>
                <br />
                <table id="tableCad" class="table table-bordered tblCadastrar table-responsive">
                    <tr>
                        <th>Código</th>
                        <th>Usuario</th>
                        <th>Email</th>
                        <th>Senha</th>
                        <th>Nível</th>
                        <th></th>
                        <th></th>
                    </tr>
                    @foreach (var usu in usuario)
                    {
                        <tr>
                            <td>@usu.CodigoUsuario</td>
                            <td>@usu.NomeUsuario</td>
                            <td>@usu.EmailUsuario</td>
                            <td>@usu.SenhaUsuario</td>
                            @{if (usu.NivelUsuario == 1)

                                {
                                    <td>Administrador</td>
                                }
                                else if (usu.NivelUsuario == 2)
                                {
                                    <td>Funcionário</td>
                                }
                            }
                            <td>
                                <a  class="btn btn-primary " href="/conta/@usu.CodigoUsuario/editar"><span class="fa fa-pencil"></span> <b>Editar</b></a>
                            </td>
                            <td>
                                <a class="btn btn-danger" href="/conta/@usu.CodigoUsuario/apagar" onclick="ValidaExclusao(@usu.CodigoUsuario, event)"><span class="fa fa-trash-o"></span> <b>Excluir</b></a>
                            </td>
                        </tr>
                    }
                </table>
            </div>
        </div>
    </div>

    @*Inicio do popup cadastrar*@
    <div class="modal fade cadastrar">
        <div id="popupCadastrar" class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button data-dismiss="modal" class="close"><span>&times;</span></button>
                    <div class="modal-title"><h3><b>Cadastrar</b></h3></div>
                </div>
                <form action="/conta/cadastro" method="post">
                    <div class="modal-body">

                        <div id="imgCadastro"><p id="cadUser">Cadastro de usuario</p></div>

                        <div class="form-group">
                            <label for="textNome" class="control-label">Nome</label>
                            <input name="nome" id="textNome" class="form-control" placeholder="Digite seu Nome..." type="text" required>
                        </div>

                        <div class="form-group">
                            <label for="textEmail" class="control-label">Email</label>
                            <input name="email" id="textEmail" class="form-control" placeholder="Digite seu Email..." type="text" required>
                        </div>

                        <div class="form-group">
                            <label for="inputPassword" class="control-label">Senha</label>
                            <input name="senha" type="password" class="form-control" placeholder="Senha" id="pass1" onkeyup="checkPass(); return false;" required />
                            <span class="help-block">Mínimo de seis (6) digitos</span>
                        </div>

                        <div class="form-group">
                            <label for="inputConfirm" class="control-label">Confirme a Senha</label>
                            <input name="confirmSenha" type="password" class="form-control" placeholder="confirme a senha" id="pass2" onkeyup="checkPass(); return false;"
                                   data-match="#inputPassword" data-match-error="Atenção! As senhas não estão iguais." required />
                            <div id="error-nwl"></div>
                        </div>

                        <div class="form-group">
                            <label for="Nome">Cargo:</label>
                            <select class="form-control" name="cargo" id="cargos" onclick="checkPass(); return false;">
                                <option value="0">Selecione o nível</option>
                                <option value="1">Administrador</option>
                                <option value="2">Funcionário</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="btnCadastrar" class="btn btn-primary">Cadastrar</button>
                        <button class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
