
@{
    List<md_Planilha.mdValores> usuario = ViewBag.Usuarios;
    ViewBag.Title = "Cadastrar";
    Layout = "~/Views/Shared/_LayoutAdm.cshtml";
}

@if (TempData["sucesso"] != null)
{
    <div class="alert alert-success" id="notfyCadastrar">@TempData["sucesso"] <span class="fa fa-check fa-2x"></span> </div>
}
@if (TempData["erro"] != null)
{
    <div class="alert alert-danger" id="notfyCadastrar">@TempData["erro"] <span class="fa fa-times fa-2x"></span></div>
}

<body id="cadastrar">

    <div class="body-background-cadastrar"></div>


    <div id="tituloCadastrar">
        <h2 id="btnCadUsuarios">Cadastro de Usuarios <span class="fa fa-user"></span></h2>
    </div>

    <div class="container col-xs-push-8">
        <div class="row-no-gutters">
            <div id="tituloCadastrar">

            </div>
            <button id="btnCadastrar" class="btn btn-success fa fa-user-plus pull-right fa-2x" data-toggle="modal" data-target=".cadastrar"><span style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif">&nbsp;Cadastrar</span></button>
            <br />
            <table id="tableCad" class="table table-bordered tblCadastrar table-responsive">
                <tr>
                    <th>Código</th>
                    <th>Usuario</th>
                    <th>Email</th>
                    <th>Nível</th>
                    <th></th>

                </tr>
                @foreach (var usu in usuario)
                {
                    <tr>
                        <td>@usu.CodigoUsuario</td>
                        <td>@usu.NomeUsuario</td>
                        <td>@usu.EmailUsuario</td>
                        @{if (usu.NivelUsuario == 1)

                            {
                                <td>Administrador</td>
                            }
                            else if (usu.NivelUsuario == 2)
                            {
                                <td>Funcionário</td>
                            }
                        }
                    <td>
                        <a style="font-size:22px; padding:5px 8px;" class="btn btn-primary fa fa-pencil" href="/conta/@usu.CodigoUsuario/alterarusuario"></a>
                        <a style="font-size:22px; padding:5px 10px;" class="btn btn-danger fa fa-trash-o" data-toggle="modal" data-target=".@usu.CodigoUsuario"></a>

                        @if (usu.SituacaoUsuario == 1)
                        {
                            <a style="font-size:22px; padding:5px 10px;" class="btn btn-warning fa fa-ban" href="/conta/@usu.CodigoUsuario/bloquearusuario"></a>
                        }
                        else if (usu.SituacaoUsuario == 0)
                        {
                            <a style="font-size:22px; padding:5px 10px;" class="btn btn-success fa fa-ban" href="/conta/@usu.CodigoUsuario/bloquearusuario"></a>
                        }

                        <!-- INICIO DO ALERT EXCLUIR USUARIO-->
                        <div class="modal fade @usu.CodigoUsuario">
                            <div id="exluirUsuario" class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button data-dismiss="modal" class="close"><span>&times;</span></button>
                                        <div class="modal-title"><h3><span class="fa fa-info-circle fa-2x popupExcluir"></span><b>  Excluir Usuario "@usu.NomeUsuario"</b></h3></div>
                                    </div>
                                    <div class="modal-body">
                                        <p>Essa exclusão é permanente, todos os dados do usuario será perdido!</p>
                                    </div>
                                    <div class="modal-footer">
                                        <a href="/conta/@usu.CodigoUsuario/apagarusuario" class="btn btn-danger">Excluir</a>
                                        <button data-dismiss="modal" class="btn btn-primary">Cancelar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- FIM DO ALERT -->

                    </td>
                    </tr>
                }
            </table>
        </div>
    </div>


    @*Inicio do popup cadastrar*@
    <div class="modal fade cadastrar">
        <div id="popupCadastrar" class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button data-dismiss="modal" class="close"><span>&times;</span></button>
                    <div class="modal-title"><h3><b>Cadastrar</b> <span class="fa fa-user-plus"></span></h3></div>
                </div>
                <form action="/conta/cadastro" method="post">
                    <div class="modal-body">

                        <div id="imgCadastro">
                            <p id="Cad">Cadastro</p>
                            <h3 id="De">De</h3>
                            <p id="Usu">Usuari<span class="fa fa-user-circle"></span></p>
                        </div>

                        <div class="form-group">
                            <label for="textNome" class="control-label">Nome</label>
                            <input name="nome" id="textNome" class="form-control" placeholder="Digite seu Nome..." type="text" required>
                        </div>

                        <div class="form-group">
                            <label for="textEmail" class="control-label">Email</label>
                            <input name="email" id="textEmail" class="form-control" placeholder="Digite seu Email..." type="text" required>
                        </div>

                        <div class="form-group">
                            <label for="inputPassword" class="control-label">Senha</label>
                            <input name="senha" type="password" class="form-control" placeholder="Senha" id="pass1" onkeyup="checkPass(); return false;" required />
                            <span class="help-block">Mínimo de seis (6) digitos</span>
                        </div>

                        <div class="form-group">
                            <label for="inputConfirm" class="control-label">Confirme a Senha</label>
                            <input name="confirmSenha" type="password" class="form-control" placeholder="confirme a senha" id="pass2" onkeyup="checkPass(); return false;"
                                   data-match="#inputPassword" data-match-error="Atenção! As senhas não estão iguais." required />
                            <div id="error-nwl"></div>
                        </div>

                        <div class="form-group">
                            <label for="Nome">Cargo:</label>
                            <select class="form-control" name="cargo" id="cargos" onclick="checkPass(); return false;">
                                <option value="0">Selecione o nível</option>
                                <option value="1">Administrador</option>
                                <option value="2">Funcionário</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="btnPopupCadastrar" class="btn btn-success">Cadastrar</button>
                        <button class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
